"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _express=require("express"),_express2=_interopRequireDefault(_express),_cluster=require("cluster"),_cluster2=_interopRequireDefault(_cluster),_os=require("os"),_os2=_interopRequireDefault(_os),_cors=require("cors"),_cors2=_interopRequireDefault(_cors),_factGet=require("./utils/factGet"),_factGet2=_interopRequireDefault(_factGet),_recent=require("./utils/recent"),_recent2=_interopRequireDefault(_recent),app=(0,_express2["default"])(),cpus=_os2["default"].cpus().length;if(_cluster2["default"].isMaster){for(var i=0;cpus>i;i++)_cluster2["default"].fork();_cluster2["default"].on("exit",function(e,r,t){t?console.log("worker was killed by signal: "+t):0!==r?console.log("worker exited with error code: "+r):console.log("worker success!")})}else app.use((0,_cors2["default"])()),app.get("/fact",_factGet2["default"]),app.get("/recent/:number",_recent2["default"]),app.get("*",function(e,r){r.status(404).send("This isn't an appropriate path, please go to /fact or /recent/:number")}),app.listen(process.env.PORT||8080,function(){console.log("Now listening on %s",process.env.port||8080)});